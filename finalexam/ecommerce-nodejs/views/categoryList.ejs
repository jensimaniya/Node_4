<!doctype html>
<html>
<head>
  <title>Categories</title>
</head>

<body style="
  margin:0;
  font-family:Arial, sans-serif;

">

  <%- include('partials/navbar') %>

  <div style="max-width:900px; margin:40px auto; padding:20px;">

    <h1 style="
      text-align:center;
      margin-bottom:30px;
      font-size:34px;
      background:linear-gradient(45deg,#ff6a88,#ff99ac,#d66efd);
      -webkit-background-clip:text;
      color:transparent;
      font-weight:bold;
    ">
      Categories
    </h1>

    <!-- Category List -->
    <ul style="list-style:none; padding:0; margin:0 0 30px 0;">
      <% categories.forEach(c => { %>
        <li style="
          background:linear-gradient(135deg, #89f7fe, #66a6ff);
          padding:14px 20px;
          margin-bottom:12px;
          border-radius:10px;
          box-shadow:0 4px 10px rgba(0,0,0,0.15);
          display:flex;
          justify-content:space-between;
          align-items:center;
          font-size:18px;
          color:white;
          font-weight:bold;
        ">
          <span><%= c.name %></span>

          <form method="post" action="/categories/<%= c._id %>?_method=DELETE" style="display:inline;">
            <button style="
              background:linear-gradient(45deg, #ff416c, #ff4b2b);
              color:white;
              padding:7px 16px;
              border:none;
              border-radius:6px;
              cursor:pointer;
              font-size:14px;
              transition:0.2s;
              font-weight:bold;
            "
            onmouseover="this.style.opacity='0.85'"
            onmouseout="this.style.opacity='1'">
              Delete
            </button>
          </form>
        </li>
      <% }) %>
    </ul>

    <!-- Add Category Form -->
    <% if(currentUser && currentUser.role === 'admin'){ %>

      <h3 style="
        font-size:24px;
        margin-bottom:12px;
        background:linear-gradient(45deg,#ff9a9e,#fad0c4,#fad0c4);
        -webkit-background-clip:text;
        color:transparent;
        font-weight:bold;
      ">
        Add Category
      </h3>

      <form method="post" action="/categories" style="
        background:linear-gradient(135deg, #f6d365, #fda085);
        padding:20px;
        border-radius:10px;
        box-shadow:0 4px 10px rgba(0,0,0,0.15);
        max-width:420px;
      ">

        <input name="name" required placeholder="Category Name" style="
          width:90%;
          padding:12px;
          border:2px solid #ffffffaa;
          border-radius:7px;
          font-size:16px;
          margin-bottom:14px;
          background:#ffffff;
        "/>

        <button style="
          background:linear-gradient(45deg, #00b4db, #0083b0);
          color:white;
          padding:10px 18px;
          font-size:16px;
          border:none;
          border-radius:6px;
          cursor:pointer;
          font-weight:bold;
          transition:0.2s;
        "
        onmouseover="this.style.opacity='0.85'"
        onmouseout="this.style.opacity='1'">
          Add
        </button>

      </form>

    <% } else { %>

      <p style="
        color:#c62828;
        font-size:18px;
        font-weight:bold;
      ">
        Only admins can add categories.
      </p>

    <% } %>

  </div>

</body>
</html>
